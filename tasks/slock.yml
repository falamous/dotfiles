---
- name: clone slock
  git:
    repo: https://github.com/falamous/slock
    dest: "/home/{{ username }}/src/slock"

- name: install xautolock
  kewlfft.aur.aur:
    name: xautolock
    state: present

- name: compile and install slock
  shell:
    chdir: "/home/{{ username }}/src/slock"
    cmd: "make install"
    creates: "/usr/local/bin/slock"
  become: yes

- name: set slock to be suid
  file:
    name: "/usr/local/bin"
    mode: +s
  become: yes
